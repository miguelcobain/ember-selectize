var get=Ember.get,set=Ember.set,isArray=Ember.isArray,typeOf=Ember.typeOf;Ember.Selectize=Ember.View.extend({attributeBindings:["multiple","placeholder","autocomplete"],classNames:["ember-selectize"],autocomplete:"off",placeholder:Ember.computed.alias("prompt"),tagName:"select",optionValuePath:"content.value",optionLabelPath:"content.label",plugins:["remove_button"],_valuePath:Ember.computed("optionValuePath",function(){return get(this,"optionValuePath").replace(/^content\.?/,"")}),_labelPath:Ember.computed("optionLabelPath",function(){return get(this,"optionLabelPath").replace(/^content\.?/,"")}),inDOM:!1,create:!1,createAction:"create",didInsertElement:function(){this.inDOM=!0,this.createAction&&"create"!==this.createAction&&(this.create=!0),this.$().selectize({plugins:this.plugins,labelField:"label",valueField:"value",searchField:"label",create:this.create?$.proxy(this._create,this):!1,onItemAdd:$.proxy(this._onItemAdd,this),onItemRemove:$.proxy(this._onItemRemove,this),onType:$.proxy(this._onType,this)}),this.selectize=this.$()[0].selectize,this._disabledDidChange(),this._contentDidChange(),this._selectionDidChange()},willDestroyElement:function(){this._contentWillChange(),this._selectionWillChange(),this.selectize.destroy(),this.inDOM=!1},_create:function(e,t){this.selectize.setTextboxValue(""),get(this,"controller").send(get(this,"createAction"),e),t(null)},_onType:function(e){set(this,"filter",e)},_onItemAdd:function(e){var t=get(this,"content"),i=get(this,"selection"),s=get(this,"multiple");if(t){var n=t.find(function(t){return get(t,get(this,"_valuePath"))==e?!0:void 0},this);s&&isArray(i)&&n?i.findBy(get(this,"_valuePath"),get(n,get(this,"_valuePath")))||i.addObject(n):n&&(i&&get(n,get(this,"_valuePath"))===get(i,get(this,"_valuePath"))||set(this,"selection",n))}},_onItemRemove:function(e){if(!this.removing){var t=get(this,"content"),i=get(this,"selection"),s=get(this,"multiple");if(t){var n=t.find(function(t){return get(t,get(this,"_valuePath"))==e?!0:void 0},this);s&&isArray(i)&&n?i.removeObject(n):s||this.set("selection",null)}}},_selectionWillChange:Ember.beforeObserver(function(){var e=get(this,"multiple"),t=get(this,"selection");if(t&&isArray(t)&&e){t.removeArrayObserver(this,{willChange:"selectionArrayWillChange",didChange:"selectionArrayDidChange"});var i=t?get(t,"length"):0;this.selectionArrayWillChange(t,0,i)}},"selection"),_selectionDidChange:Ember.observer(function(){if(this.inDOM){var e=get(this,"multiple"),t=get(this,"selection");if(e){if(!t)return void set(this,"selection",[]);if(!isArray(t))return t=Ember.A([t]),void set(this,"selection",t);t.addArrayObserver(this,{willChange:"selectionArrayWillChange",didChange:"selectionArrayDidChange"});var i=t?get(t,"length"):0;this.selectionArrayDidChange(t,0,null,i)}else t?this.selectize.addItem(get(t,get(this,"_valuePath"))):(set(this,"selection",null),this.selectize&&this.selectize.clear())}},"selection"),selectionArrayWillChange:function(e,t,i){this.removing=!0;for(var s=t;t+i>s;s++)this.selectionObjectWasRemoved(e.objectAt(s));this.removing=!1},selectionArrayDidChange:function(e,t,i,s){for(var n=t;t+s>n;n++)this.selectionObjectWasAdded(e.objectAt(n),n)},selectionObjectWasAdded:function(e){this.selectize&&this.selectize.addItem(get(e,get(this,"_valuePath")))},selectionObjectWasRemoved:function(e){this.selectize&&this.selectize.removeItem(get(e,get(this,"_valuePath")))},_contentWillChange:Ember.beforeObserver(function(){if(this.inDOM){var e=get(this,"content");e&&e.removeArrayObserver(this,{willChange:"contentArrayWillChange",didChange:"contentArrayDidChange"});var t=e?get(e,"length"):0;this.removing=!0,this.contentArrayWillChange(e,0,t),this.removing=!1,this._selectionDidChange()}},"content"),_contentDidChange:Ember.observer(function(){if(this.inDOM){var e=get(this,"content");e&&e.addArrayObserver(this,{willChange:"contentArrayWillChange",didChange:"contentArrayDidChange"});var t=e?get(e,"length"):0;this.contentArrayDidChange(e,0,null,t)}},"content"),contentArrayWillChange:function(e,t,i){for(var s=t;t+i>s;s++)this.objectWasRemoved(e.objectAt(s));this._selectionDidChange()},contentArrayDidChange:function(e,t,i,s){for(var n=t;t+s>n;n++)this.objectWasAdded(e.objectAt(n),n);this._selectionDidChange()},objectWasAdded:function(e){var t={};"object"===typeOf(e)||"instance"===typeOf(e)?(t={label:get(e,get(this,"_labelPath")),value:get(e,get(this,"_valuePath")),data:e},Ember.addObserver(e,get(this,"_labelPath"),this,"_labelDidChange")):t={label:e,value:e,data:e},this.selectize&&(this.selectize.addOption(t),this.selectize.refreshOptions(this.selectize.isFocused&&!this.selectize.isInputHidden))},objectWasRemoved:function(e){("object"===typeOf(e)||"instance"===typeOf(e))&&Ember.removeObserver(e,get(this,"_labelPath"),this,"_labelDidChange"),this.selectize&&(this.selectize.removeOption(get(e,get(this,"_valuePath"))),this.selectize.refreshOptions(this.selectize.isFocused&&!this.selectize.isInputHidden))},_labelDidChange:function(e){if(this.selectize){var t={label:get(e,get(this,"_labelPath")),value:get(e,get(this,"_valuePath")),data:e};this.selectize.updateOption(t.value,t)}},_disabledDidChange:Ember.observer(function(){if(this.selectize){var e=get(this,"disabled");e?this.selectize.disable():this.selectize.enable()}},"disabled")});